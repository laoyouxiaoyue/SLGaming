Name: gateway
Host: 0.0.0.0
Port: 8888
Mode: dev

# Nacos 配置（可选）
Nacos:
  Hosts:
    - 120.26.29.194:8848
  Namespace: "31b819c6-62bf-4081-b6bb-7d3e52d09b36"
  Group: dev
  DataId: gateway.yaml
  Username: "nacos"
  Password: "nacos"

# Consul 配置（可选）
Consul:
  Address: 120.26.29.194:8500
  Token: ""
  Service:
    Name: gateway
    ID: ""
    Address: ""
    Tags:
      - gateway
      - api
    CheckInterval: 10s
    CheckTimeout: 5s

# 上游服务配置（用于 Consul 服务发现）
Upstream:
  CodeService: code-rpc   # Consul 中的验证码服务名称
  UserService: user-rpc   # Consul 中的用户服务名称
  OrderService: order-rpc # Consul 中的订单服务名称

# Redis 配置（用于存储 Refresh Token）
Redis:
  Key: ""
  Host: 120.26.29.194:6379
  Type: node
  Pass: ""
  Tls: false

# JWT 配置
JWT:
  SecretKey: "your-secret-key-change-in-production"  # JWT 密钥（生产环境请修改）
  AccessTokenDuration: 600s   # Access Token 过期时间，默认 10 分钟（600 秒）
  RefreshTokenDuration: 1209600s  # Refresh Token 过期时间，默认 14 天（1,209,600 秒）

# 限流配置
RateLimit:
  Enabled: true              # 是否启用限流
  GlobalQPS: 2000            # 全局 QPS 限制
  Routes:
    # 验证码发送接口：严格限流，防止短信轰炸
    - Path: "/api/code/send"
      Method: "POST"
      GlobalQPS: 100          # 该接口全局 QPS 限制
      PerIPQPS: 5             # 每个 IP 每秒最多 5 次
      PerIPPerMinute: 10       # 每个 IP 每分钟最多 10 次（暂未实现，可扩展）
    
    # 用户登录接口：防止暴力破解
    - Path: "/api/user/login"
      Method: "POST"
      GlobalQPS: 200
      PerIPQPS: 10             # 每个 IP 每秒最多 10 次
      PerUserQPS: 5            # 每个用户每秒最多 5 次
    
    # 用户注册接口：防止批量注册
    - Path: "/api/user/register"
      Method: "POST"
      GlobalQPS: 100
      PerIPQPS: 3              # 每个 IP 每秒最多 3 次
    
    # 订单创建接口：防止刷单
    - Path: "/api/order"
      Method: "POST"
      GlobalQPS: 500
      PerUserQPS: 10           # 每个用户每秒最多 10 次
